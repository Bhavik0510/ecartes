<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="budgetary_quotation_printer_report_template">
            <t t-call="web.html_container">
                <t t-foreach="docs" t-as="doc">
                    <t t-call="ecartes_report.delhi_custom_external_layout_header">
                        <div class="page">
                            <div style="width:100%;float:left;margin-top:60px;margin-bottom:20px;">
                                <div style="font-weight:bold;text-decoration:underline;font-size:15px;">
                                    CUSTOMER DETAILS
                                </div>
                            </div>

                            <div style="width:100%;float:left;margin-bottom:20px;">
                                <div style="width:100%;float:left;display:flex;">
                                    <div style="width:100%;float:left;font-size:15px;">
                                        To,
                                    </div>
                                </div>
                                <div style="width:100%;float:left;display:flex;">
                                    <div style="width:50%;float:left;">
                                        <t t-esc="doc.responsible_person.name"/>
                                    </div>
                                    <div style="width:50%;float:left;font-size:15px;">
                                        <strong>
                                            <span>Date:</span>
                                        </strong>
                                        <span><t t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y/%m/%d')" /></span>
                                    </div>
                                </div>
                                <div style="width:100%;float:left;display:flex;">
                                    <div style="width:50%;float:left;font-size:15px;">
                                        <t t-esc="doc.partner_id.name"/>
                                    </div>
                                    <div style="width:50%;float:left;font-size:15px;">
                                        <strong>
                                            <span>Ref:</span>
                                        </strong>
                                        <span><t t-esc="doc.name"/></span>
                                    </div>
                                </div>
                                <div style="width:100%;float:left;display:flex;">
                                    <div style="width:100%;float:left;font-size:15px;">
                                        <div><span t-if="doc.partner_id.street"><t t-esc="doc.partner_id.street"/></span>,<span t-if="doc.partner_id.street2"><t t-esc="doc.partner_id.street2"/></span></div>
                                        <div><span t-if="doc.partner_id.city"><t t-esc="doc.partner_id.city"/></span>, <span t-if="doc.partner_id.street"><t t-esc="doc.partner_id.state_id.name"/></span>-
                                        <span t-if="doc.partner_id.zip"><t t-esc="doc.partner_id.zip"/></span></div>
                                    </div>
                                </div>
                            </div>
                            <div style="width:100%;float:left;font-weight:bold;margin-bottom:20px;font-size:15px;">
                                Subject: Deal#<span t-field="doc.deal_id.name" class="fw-bold"/>
                            </div>
                            <div style="width:100%;float:left;margin-bottom:40px;font-size:15px;">
                                <div>Respected Sir,</div>
                                <div style="margin-top:10px;font-size:15px;">
                                    <p>
                                        We <strong>“Ecartes Technology Pvdoc. Ltd”</strong> are pleased to introduce ourselves as the
                                        pioneer company in the field of printer solution in India and <strong>Authorized
                                        Distributer of MATICA range of card printers in India.</strong> With service and support
                                        extended across the country we promise to give you the best possible support
                                        anywhere in India.
                                    </p>
                                </div>
                                <div style="font-size:15px;">
                                    <p>
                                        <strong>Matica</strong> is a world leader in thermal printing technology. These printers increase
                                        overall productivity by reducing costs, improved quality and best security
                                        features. With Matica, we will provide you with the best photo ID solutions
                                        because of unparalleled commitment with research, quality and service.
                                    </p>
                                </div>
                                <div style="font-size:15px;">
                                    <p>
                                        Single and dual sided printing for text, logos, barcodes, signature and photos
                                        in full colour we provide the best quality product in its class. For printing
                                        secure ID cards for Defence personals, schools, Health clubs, public safety
                                        departments, local and state government agencies, high volume customer loyalty
                                        cards to sophisticated access cards with embedded electronics of smart cards and
                                        laminations on these cards, all this can be done and that too all in one pass.
                                    </p>
                                </div>
                                <div style="font-size:15px;">
                                    Please find attached our proposal for
                                    <strong>Deal#<t t-esc="doc.deal_id.name"/></strong>
                                </div>
                            </div>

                            <table class="table" style="font-size:15px;">
                                <style>th,td{ border: 1px solid black !important; }</style>
                                <tr style="background-color:#6d3473; color:white">
                                    <t>
                                        <th class="text-center">S.No</th>
                                        <th class="text-center">Product Name</th>
                                        <th class="text-center" style="width:10%">Product Code</th>
                                        <th class="text-center">HSN Code</th>
                                        <th class="text-center">Quantity</th>
                                        <th class="text-center" style="width:20%">Unit Price</th>
                                        <!-- <th class="text-center">Taxes</th> -->
                                        <th class="text-center" style="width:20%">Sub Total</th>
                                    </t>
                                </tr>
                                <tr>
                                    <t t-set="sr_no" t-value="0"/>
                                    <t t-foreach="doc.order_line" t-as="d">
                                        <tr class="border-black">
                                            <t t-set="sr_no" t-value="sr_no+1"/>
                                            <td style="border:1px solid black">
                                                <span t-esc="sr_no"/>
                                            </td>
                                            <td>
                                                <span t-field="d.product_id.name"/>
                                                <br></br>
                                                <span style= "font-size:13px;font-style: oblique;" t-esc="d.product_id.description"/>
                                            </td>
                                            <td>
                                                <t t-esc="d.product_id.default_code"/>
                                            </td>
                                            <td>
                                                 <t t-esc='d.product_id.l10n_in_hsn_code'/>
                                            </td>
                                            <td>
                                                <t t-esc="d.product_uom_qty"/>
                                            </td>
                                            <td>
                                                <span>₹
                                                    <span t-field="d.price_unit"/></span>
                                            </td>
                                            <!-- <td>
                                                <t t-foreach="d.tax_id" t-as="c">
                                                    <t t-esc="c.name"/>
    
                                                </t>
    
                                            </td> -->
                                            <td>
                                                <span t-field="d.price_subtotal"/>
                                            </td>
                                        </tr>
    
                                    </t>
    
                                </tr>
                            </table>

                            <div style="width:100%;float:left;margin-bottom: 50px;page-break-inside: avoid;"
                                class="clearfix" name="so_total_summary">
                                <div id="total" class="row" name="total">
                                    <div t-attf-class="#{'col-7' if report_type != 'html' else 'col-sm-7 col-md-6'} ml-auto"
                                        style="font-size:15px;margin-top:10px;">
                                        <table class="table table-sm">
                                            <t t-set="tax_totals" t-value="doc.tax_totals"/>
                                            <t t-foreach="tax_totals['subtotals']" t-as="subtotal">
                                                <tr class="border-black o_subtotal" style="background-color:#393D47;color:white;">
                                                    <td>
                                                    <strong t-esc="subtotal['name']"/>
                                                    </td>

                                                    <td class="text-right">
                                                        <span t-att-class="oe_subtotal_footer_separator" t-esc="subtotal['base_amount_currency']" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                                    </td>
                                                </tr>
                                                <t t-set="subtotal_to_show" t-value="subtotal['name']"/>
                                                <t t-foreach="doc.order_line.mapped('tax_id')" t-as="tax">
                                                    <t t-if="tax.amount_type == 'group'">
                                                        <tr t-foreach="tax.children_tax_ids" t-as="tax_line">
                                                            <td>
                                                                <span t-esc="tax_line.description"/>

                                                            </td>
                                                            <td style="text-align:right;">
                                                                <t t-if="tax_line.tax_group_id.name == 'SGST'">
                                                                    ₹
                                                                    <span t-esc="'{:,.2f}'.format((sum((doc.order_line.filtered(lambda line: tax_line in line.mapped('tax_id').mapped('children_tax_ids'))).mapped('price_subtotal')) * tax_line.amount / 100))"/>
                                                                </t>
                                                                <t t-if="tax_line.tax_group_id.name == 'CGST'">
                                                                ₹
                                                                    <span t-esc="'{:,.2f}'.format((sum((doc.order_line.filtered(lambda line: tax_line in line.mapped('tax_id').mapped('children_tax_ids'))).mapped('price_subtotal')) * tax_line.amount / 100))"/>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                    </t>
                                                    <t t-else="">
                                                        <tr>
                                                            <td>
                                                                <span t-esc="tax.description"/>
                                                            </td>
                                                            <td style="text-align:right;">
                                                                <t t-if="tax.tax_group_id.name == 'SGST'">
                                                                    ₹
                                                                    <span t-esc="'{:,.2f}'.format((sum((doc.order_line.filtered(lambda line: tax in line.mapped('tax_id').mapped('children_tax_ids'))).mapped('price_subtotal')) * tax.amount / 100))"/>
                                                                </t>
                                                                <t t-if="tax.tax_group_id.name == 'CGST'">
                                                                ₹
                                                                <span t-esc="'{:,.2f}'.format((sum((doc.order_line.filtered(lambda line: tax in line.mapped('tax_id').mapped('children_tax_ids'))).mapped('price_subtotal')) * tax.amount / 100))"/>
                                                                </t>
                                                                <t t-if="tax.tax_group_id.name == 'IGST'">
                                                                ₹
                                                                <span t-esc="'{:,.2f}'.format((sum((doc.order_line.filtered(lambda line: tax in line.mapped('tax_id'))).mapped('price_subtotal')) * tax.amount / 100))"/>
                                                                </t>
                                                            </td>
                                                        </tr>
                                                    </t>

                                                </t>
                                                <tr class="border-black" style="background-color:#393D47;color:white;">
                                                    <td>
                                                        <strong>Tax Total</strong>
                                                    </td>
                                                    <td colspan="1" style="text-align:right;">
                                                        <span t-field="doc.amount_tax"/>
                                                    </td>
                                                </tr>
                                            <!--Total amount with all taxes-->
                                                <tr class="border-black o_total" style="background-color:#393D47;color:white;">
                                                    <td>
                                                        <strong>Total</strong>
                                                    </td>
                                                    <td class="text-right">
                                                        <span t-esc="tax_totals['total_amount_currency']" t-options='{"widget": "monetary", "display_currency": doc.currency_id}'/>
                                                    </td>
                                                </tr>
                                            </t>
                                        </table>
                                    </div>
                                </div>
                            </div>   
 
                        </div>
                        <div style="width:100%;float:left;text-align:left;margin-top: 0px;page-break-inside: avoid;font-size:15px;">

                            <div>
                                <b >Validity : </b>
                                <t t-esc="doc.validity_date"/>
                            </div>
                            <div>
                                <b >Current Delivery Time: </b>
                                <t t-esc="doc.commitment_date"/>
                            </div>
                            <div>
                                <b >Warranty </b>
                                <span> </span>
                            </div>
                            <div>
                                <b>Payment Terms:</b>
                                <t t-esc="doc.payment_term_id.name"/>
                            </div>
                            <div>
                                <b>Freight &amp; Insurance: </b>
                                <span>
                                    Included in above price
                                </span>
                            </div>
                            <div>
                                <b>Landing Cost/Transportation:</b>
                                <span>
                                    Included in above price
                                </span>
                            </div>
                            <div t-if="doc.note">
                                <span style="padding-left:10px;">
                                    <t t-esc="doc.note"/>
                                </span>
                            </div>
                        
                        </div> 
                        <div style="width:100%;float:left;font-size:15px;">
                            <div>
                                <p>We hope the above is as per your requirement and look forward to your early and
                                    valuable
                                    feedback.
                                </p>
                            </div>
                        </div>
                        <div style="width:100%;float:left;margin-top:20px;font-size:15px;page-break-inside: avoid;">
                            <div>Yours Faithfully</div>
                            <strong>
                                <span t-field="doc.company_id.name"/>
                            </strong>
                        </div>
                    </t>
                </t>
            </t>
        </template>
    </data>
</odoo>
